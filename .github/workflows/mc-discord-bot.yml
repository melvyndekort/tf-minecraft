name: Deploy mc-discord-bot to GHCR

on:
  push:
    branches: [main]
    paths:
      - 'src/minecraft_tools/discord_bot/**'
      - 'tests/test_discord_bot.py'
      - 'docker/discord-bot.Dockerfile'
      - 'pyproject.toml'
      - 'uv.lock'
      - '.github/workflows/mc-discord-bot.yml'
  pull_request:
    branches: [main]
    paths:
      - 'src/minecraft_tools/discord_bot/**'
      - 'tests/test_discord_bot.py'
      - 'docker/discord-bot.Dockerfile'
      - 'pyproject.toml'
      - 'uv.lock'
      - '.github/workflows/mc-discord-bot.yml'
  workflow_dispatch:

jobs:
  build:
    uses: ./.github/workflows/build-component.yml
    with:
      component: mc-discord-bot
      dockerfile: ./docker/discord-bot.Dockerfile
