name: Deploy mc-dns-updater to GHCR

on:
  push:
    branches: [main]
    paths:
      - 'src/minecraft_tools/dns_updater/**'
      - 'tests/test_dns_updater.py'
      - 'docker/dns-updater.Dockerfile'
      - 'pyproject.toml'
      - 'uv.lock'
      - '.github/workflows/mc-dns-updater.yml'
  pull_request:
    branches: [main]
    paths:
      - 'src/minecraft_tools/dns_updater/**'
      - 'tests/test_dns_updater.py'
      - 'docker/dns-updater.Dockerfile'
      - 'pyproject.toml'
      - 'uv.lock'
      - '.github/workflows/mc-dns-updater.yml'
  workflow_dispatch:

jobs:
  build:
    uses: ./.github/workflows/build-component.yml
    with:
      component: mc-dns-updater
      dockerfile: ./docker/dns-updater.Dockerfile
