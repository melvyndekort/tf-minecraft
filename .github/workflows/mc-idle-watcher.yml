name: Deploy mc-idle-watcher to GHCR

on:
  push:
    branches: [main]
    paths:
      - 'src/minecraft_tools/idle_watcher/**'
      - 'tests/test_idle_watcher.py'
      - 'docker/idle-watcher.Dockerfile'
      - 'pyproject.toml'
      - 'uv.lock'
      - '.github/workflows/mc-idle-watcher.yml'
  pull_request:
    branches: [main]
    paths:
      - 'src/minecraft_tools/idle_watcher/**'
      - 'tests/test_idle_watcher.py'
      - 'docker/idle-watcher.Dockerfile'
      - 'pyproject.toml'
      - 'uv.lock'
      - '.github/workflows/mc-idle-watcher.yml'
  workflow_dispatch:

jobs:
  build:
    uses: ./.github/workflows/build-component.yml
    with:
      component: mc-idle-watcher
      dockerfile: ./docker/idle-watcher.Dockerfile
